Trying to recreate XGIS functionality.